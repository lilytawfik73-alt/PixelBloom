<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>PixelBloom — Portfolio</title>
  <style>
    :root{
      --bg:#0f1724; --card:#0b1220; --muted:#9aa4b2; --accent:#ff6b6b; --accent-2:#7bd389; --glass: rgba(255,255,255,0.04);
      --max-w:1100px;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    body{margin:0;background:linear-gradient(180deg,#071025 0%, #061426 60%);color:#e6eef6;min-height:100vh;display:flex;align-items:flex-start;justify-content:center;padding:36px;}
    .wrap{width:100%;max-width:var(--max-w);}
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:24px}
    .brand{display:flex;align-items:center;gap:14px}
    .logo{width:56px;height:56px;border-radius:12px;background:linear-gradient(135deg,var(--accent),var(--accent-2));display:flex;align-items:center;justify-content:center;font-weight:700;box-shadow:0 6px 18px rgba(0,0,0,0.5)}
    .logo small{font-size:18px;color:#061426}
    h1{margin:0;font-size:20px}
    p.lead{margin:0;color:var(--muted);font-size:13px}
    .controls{display:flex;gap:12px}
    button{background:var(--glass);border:1px solid rgba(255,255,255,0.04);color:inherit;padding:10px 14px;border-radius:10px;cursor:pointer;font-weight:600}
    button.primary{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#061426;border:none}

    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:18px}
    .card{background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));padding:14px;border-radius:12px;border:1px solid rgba(255,255,255,0.03);min-height:220px;display:flex;flex-direction:column}
    .thumb{height:140px;background:#07111b;border-radius:8px;display:flex;align-items:center;justify-content:center;overflow:hidden}
    .thumb img{max-width:100%;max-height:100%;display:block}
    .meta{margin-top:10px;flex:1;display:flex;flex-direction:column}
    .meta h3{margin:0;font-size:15px}
    .meta p{margin:6px 0 0;font-size:13px;color:var(--muted);flex:1}
    .meta .tags{margin-top:8px;display:flex;gap:6px;flex-wrap:wrap}
    .tag{background:rgba(255,255,255,0.03);padding:6px 8px;border-radius:999px;font-size:12px;color:var(--muted)}
    .card .actions{display:flex;gap:8px;justify-content:flex-end;margin-top:10px}

    /* modal */
    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(2,6,23,0.6);z-index:50}
    .modal.active{display:flex}
    .modal .panel{background:linear-gradient(180deg,#071427,#08151f);padding:18px;border-radius:12px;width:92%;max-width:720px;border:1px solid rgba(255,255,255,0.04)}
    .form-row{display:flex;gap:12px;margin-bottom:12px}
    .form-row .col{flex:1}
    label{display:block;font-size:13px;margin-bottom:6px;color:var(--muted)}
    input[type=text],textarea,input[type=file],select{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:inherit}
    textarea{min-height:90px}
    .hint{font-size:12px;color:var(--muted);margin-top:8px}

    .toolbar{display:flex;gap:8px;align-items:center}
    .small{font-size:12px;color:var(--muted)}

    footer{margin-top:20px;color:var(--muted);font-size:13px;text-align:center}

    @media (max-width:600px){header{flex-direction:column;align-items:flex-start;gap:12px}.controls{width:100%;justify-content:space-between}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden>
          <small>PB</small>
        </div>
        <div>
          <h1>PixelBloom</h1>
          <p class="lead">Logos • Brand identity • Social visuals — Portfolio</p>
        </div>
      </div>
      <div class="controls">
        <div class="toolbar small">Projects: <strong id="count">0</strong></div>
        <button id="importBtn">Import</button>
        <button id="exportBtn">Export</button>
        <button id="addBtn" class="primary">Add Project</button>
      </div>
    </header>

    <main>
      <section id="grid" class="grid" aria-live="polite">
        <!-- cards injected here -->
      </section>
    </main>

    <footer>
      PixelBloom — a simple local portfolio. Works are stored in your browser (local). To make this public, host the file on GitHub Pages, Netlify, or Vercel.
    </footer>
  </div>

  <!-- Modal: Add / Edit -->
  <div class="modal" id="modal">
    <div class="panel">
      <h3 id="modalTitle">Add Project</h3>
      <div class="form-row">
        <div class="col">
          <label>Project Title</label>
          <input id="title" type="text" placeholder="eg. Bloom Coffee — Brand Identity" />
        </div>
        <div class="col">
          <label>Category / Tag</label>
          <input id="tag" type="text" placeholder="eg. Logo, Web, Social" />
        </div>
      </div>
      <div class="form-row">
        <div class="col">
          <label>Short description</label>
          <textarea id="desc" placeholder="One or two sentences about the project"></textarea>
        </div>
      </div>
      <div class="form-row">
        <div class="col">
          <label>Image (PNG / JPG) — will be stored locally</label>
          <input id="image" type="file" accept="image/*" />
          <div class="hint">Tip: use a clean mockup image (1080×1080 or similar). Images are saved to your browser storage.</div>
        </div>
      </div>
      <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:12px">
        <button id="cancel">Cancel</button>
        <button id="save" class="primary">Save Project</button>
      </div>
    </div>
  </div>

  <!-- hidden file input for import -->
  <input id="importFile" type="file" accept="application/json" style="display:none" />

  <script>
    // Simple local portfolio app: stores projects in localStorage as JSON.
    const LS_KEY = 'pixelbloom_projects_v1';
    const grid = document.getElementById('grid');
    const countEl = document.getElementById('count');
    const modal = document.getElementById('modal');
    const addBtn = document.getElementById('addBtn');
    const saveBtn = document.getElementById('save');
    const cancelBtn = document.getElementById('cancel');
    const importBtn = document.getElementById('importBtn');
    const exportBtn = document.getElementById('exportBtn');
    const importFile = document.getElementById('importFile');

    let projects = [];
    let editingId = null;

    function readLS(){
      try{
        const raw = localStorage.getItem(LS_KEY);
        projects = raw ? JSON.parse(raw) : [];
      }catch(e){projects=[]}
    }
    function writeLS(){ localStorage.setItem(LS_KEY, JSON.stringify(projects)); }

    function render(){
      grid.innerHTML='';
      projects.forEach((p,idx)=>{
        const card = document.createElement('article'); card.className='card';
        card.innerHTML = `
          <div class="thumb">${p.img?`<img src="${p.img}" alt="${escapeHtml(p.title)}">`:'<div style="color:var(--muted);padding:12px;text-align:center">No image</div>'}</div>
          <div class="meta">
            <h3>${escapeHtml(p.title)}</h3>
            <p>${escapeHtml(p.desc)}</p>
            <div class="tags">${p.tag?`<span class="tag">${escapeHtml(p.tag)}</span>`:''}</div>
            <div class="actions">
              <button data-action="view" data-id="${idx}">View</button>
              <button data-action="edit" data-id="${idx}">Edit</button>
              <button data-action="del" data-id="${idx}">Delete</button>
            </div>
          </div>
        `;
        grid.appendChild(card);
      });
      countEl.textContent = projects.length;
    }

    function escapeHtml(text){ return (text||'').replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;'); }

    function openModal(mode='add', id=null){
      modal.classList.add('active');
      document.getElementById('modalTitle').textContent = mode === 'add' ? 'Add Project' : 'Edit Project';
      if(mode==='edit' && id!==null){
        const p = projects[id]; editingId = id;
        document.getElementById('title').value = p.title || '';
        document.getElementById('tag').value = p.tag || '';
        document.getElementById('desc').value = p.desc || '';
      }else{
        editingId = null; document.getElementById('title').value='';document.getElementById('tag').value='';document.getElementById('desc').value=''; document.getElementById('image').value='';
      }
    }
    function closeModal(){ modal.classList.remove('active'); }

    addBtn.onclick = ()=> openModal('add');
    cancelBtn.onclick = closeModal;

    saveBtn.onclick = async ()=>{
      const title = document.getElementById('title').value.trim();
      const tag = document.getElementById('tag').value.trim();
      const desc = document.getElementById('desc').value.trim();
      const fileEl = document.getElementById('image');
      if(!title){ alert('Please add a title'); return; }

      // if there's a file, read it
      if(fileEl.files && fileEl.files[0]){
        const file = fileEl.files[0];
        const data = await fileToDataURL(file);
        saveProject({title,tag,desc,img:data});
      } else {
        // if editing, preserve existing image
        if(editingId!==null){
          const orig = projects[editingId];
          saveProject({title,tag,desc,img:orig?orig.img:''});
        }else{
          saveProject({title,tag,desc,img:''});
        }
      }
      closeModal();
      render();
      writeLS();
    }

    function saveProject(obj){
      if(editingId!==null){ projects[editingId] = obj; editingId = null; }
      else projects.unshift(obj);
      // limit storage size (simple safety): keep last 100
      if(projects.length>100) projects = projects.slice(0,100);
    }

    grid.addEventListener('click', (e)=>{
      const btn = e.target.closest('button'); if(!btn) return;
      const action = btn.dataset.action; const id = Number(btn.dataset.id);
      if(action==='view'){
        const p = projects[id]; if(p){ window.open(p.img || '', '_blank'); }
      } else if(action==='edit'){
        openModal('edit', id);
      } else if(action==='del'){
        if(confirm('Delete this project?')){ projects.splice(id,1); writeLS(); render(); }
      }
    });

    exportBtn.onclick = ()=>{
      const data = JSON.stringify(projects, null, 2);
      const blob = new Blob([data], {type:'application/json'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href=url; a.download='pixelbloom_projects.json'; a.click(); URL.revokeObjectURL(url);
    }

    importBtn.onclick = ()=> importFile.click();
    importFile.onchange = async (e)=>{
      const f = e.target.files[0]; if(!f) return; try{
        const text = await f.text(); const json = JSON.parse(text);
        if(!Array.isArray(json)) throw new Error('Invalid file');
        projects = json.concat(projects); writeLS(); render(); alert('Imported projects.');
      }catch(err){ alert('Invalid JSON file.'); }
      importFile.value='';
    }

    function fileToDataURL(file){
      return new Promise((res,rej)=>{
        const r = new FileReader(); r.onload = ()=> res(r.result); r.onerror = rej; r.readAsDataURL(file);
      })
    }

    // init
    (function(){ readLS(); render(); })();

    // keyboard escape to close modal
    document.addEventListener('keydown', e=>{ if(e.key==='Escape') closeModal(); });
  </script>
</body>
</html>
